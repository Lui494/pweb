<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lista de Livros</title>

  <script>
    let pilhaLivros = [];

    function mostrarLista() {
      const container = document.getElementById('minhaDiv');
      container.innerHTML = '';

      for (let i = 0; i < pilhaLivros.length; i++) {
        const livro = pilhaLivros[i];
        const tag = `<h5>${i} - Título: ${livro.titulo} | Autor: ${livro.autor} | Ano: ${livro.ano}</h5>`;
        container.innerHTML += tag;
      }
    }

    function limpaCampos() {
      document.getElementById('titulo').value = '';
      document.getElementById('autor').value = '';
      document.getElementById('ano').value = '';
    }

    function adicionar() {
      const titulo = document.getElementById('titulo').value.trim();
      const autor = document.getElementById('autor').value.trim();
      const ano = document.getElementById('ano').value.trim();

      if (!titulo || !autor || !ano) {
        alert('Preencha todos os campos antes de adicionar!');
        return;
      }

      pilhaLivros.push({ titulo, autor, ano });
      limpaCampos();
      mostrarLista();
    }

    function posicao() {
      const indice = Number(prompt('Qual posição da lista deseja consultar?'));

      if (indice < 0 || indice >= pilhaLivros.length || isNaN(indice)) {
        alert('Posição inválida!');
        return;
      }

      const livro = pilhaLivros[indice];
      alert(`Na posição ${indice} está:\nTítulo: ${livro.titulo}\nAutor: ${livro.autor}\nAno: ${livro.ano}`);
    }

    function limparLista() {
      pilhaLivros = [];
      mostrarLista();
    }

    function remover() {
      if (pilhaLivros.length === 0) {
        alert('A pilha está vazia!');
      } else {
        const removido = pilhaLivros.pop();
        alert(`Removido: ${removido.titulo} - ${removido.autor} (${removido.ano})`);
        mostrarLista();
      }
    }

    function inverterPilha() {
      pilhaLivros.reverse();
      mostrarLista();
    }

    // ✅ NOVA FUNÇÃO: Inserir livro em posição específica
    function inserirNaPosicao() {
      if (pilhaLivros.length === 0) {
        alert('A lista está vazia! Será inserido como o primeiro livro.');
      }

      const posicao = Number(prompt(`Informe a posição (0 a ${pilhaLivros.length}):`));

      if (isNaN(posicao) || posicao < 0 || posicao > pilhaLivros.length) {
        alert('Posição inválida!');
        return;
      }

      const titulo = prompt('Digite o título do livro:');
      const autor = prompt('Digite o nome do autor:');
      const ano = prompt('Digite o ano da publicação:');

      if (!titulo || !autor || !ano) {
        alert('Todos os campos devem ser preenchidos!');
        return;
      }

      const novoLivro = { titulo, autor, ano };
      pilhaLivros.splice(posicao, 0, novoLivro);

      mostrarLista();
      alert(`Livro inserido na posição ${posicao} com sucesso!`);
    }
  </script>
</head>

<body>
  <h1>Lista de Livros</h1>

  <label>Título:</label>
  <input type="text" id="titulo" placeholder="Digite o título do livro">

  <label>Autor:</label>
  <input type="text" id="autor" placeholder="Digite o nome do autor">

  <label>Ano:</label>
  <input type="text" id="ano" placeholder="Digite o ano da publicação">

  <button onclick="adicionar()">Adicionar</button>
  
  <hr>

  <button onclick="posicao()">Consultar Posição</button>
  <button onclick="remover()">Remover Último</button>
  <button onclick="limparLista()">Limpar Lista</button>
  <button onclick="inverterPilha()">Inverter Ordem</button>
  <button onclick="inserirNaPosicao()">Inserir em Posição</button>

  <br><br>

  <div id="minhaDiv"></div>

  <hr>
</body>
</html>
